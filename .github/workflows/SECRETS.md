# GitHub Actions Secrets Configuration Guide

To successfully deploy the project to Alibaba Cloud using the `.github/workflows/deploy-full.yml` workflow, you need to configure the following secrets in your GitHub repository.

## 1. Where to Configure

Go to your GitHub repository:
**Settings** -> **Secrets and variables** -> **Actions** -> **New repository secret**

## 2. Required Secrets

| Secret Name | Description | How to Obtain / Example |
| :--- | :--- | :--- |
| `SERVER_HOST` | Your Alibaba Cloud Server (ECS) Public IP Address | Found in Alibaba Cloud Console -> ECS -> Instance List -> Public IP Address |
| `SERVER_USER` | SSH Username for logging into the server | Usually `root` or `ecs-user` |
| `SERVER_SSH_KEY` | SSH Private Key for server authentication | The content of your private key file (e.g., `id_rsa` or `.pem`). <br> **Format:** Must include header/footer: <br> `-----BEGIN RSA PRIVATE KEY-----` <br> ... <br> `-----END RSA PRIVATE KEY-----` |
| `POSTGRES_PASSWORD` | Password for the Production Database | Set a strong password yourself (e.g., generated by a password manager). This will be used to initialize the PostgreSQL container. |

## 3. Automatically Used Secrets (No Configuration Needed)

The following secrets are automatically provided by GitHub Actions and do not need manual configuration:

*   `GITHUB_TOKEN`: Used to log in to GitHub Container Registry (GHCR) and pull/push images.

## 4. Verification

After configuring, your secrets list should look like this:

*   `POSTGRES_PASSWORD`
*   `SERVER_HOST`
*   `SERVER_SSH_KEY`
*   `SERVER_USER`

## 5. Troubleshooting SSH Connection

If the deployment fails at the "Deploy on server" step with an SSH error:
1.  Ensure you have added the public key (matching the `SERVER_SSH_KEY`) to `~/.ssh/authorized_keys` on your Alibaba Cloud server.
2.  Test the connection locally: `ssh -i path/to/key root@your-server-ip`
3.  Ensure the server's security group allows inbound traffic on port 22.
